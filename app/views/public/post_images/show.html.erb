<!--投稿詳細画面-->
<div class="container">
  <div class="row">
    <div class="col">
       <%= attachment_image_tag @post_image.user, :profile_image,:fill, 100,100, class: "rounded-circle" %>
       <%= link_to user_path(@post_image.user.id) do %>
         <%= @post_image.user.account_name %>
       <% end %>
    </div>
  </div>
  <div class="row">
    <div class="col-6">
      <%= attachment_image_tag @post_image, :image,:fill, 450,450, class: "rounded" %>
      <% if @post_image.favorited_by?(current_user) %>
      <p>
        <%= link_to post_image_favorite_path(@post_image.id), method: :delete do %>
          <i class="fas fa-heart fa-lg"></i><%= @post_image.favorites.count %>
        <% end %>
      </p>
      <% else %>
      <p>
        <%= link_to post_image_favorites_path(@post_image.id), method: :post do %>
          <i class="far fa-heart fa-lg"></i><%= @post_image.favorites.count %>
        <% end %>
        </p>
      <% end %>
    </div>
    <div class="col-6">
      <p>投稿内容</p>
      <%= @post_image.explain %>
      <% if @post_image.user == current_user %>
        <%= link_to "編集", edit_post_image_path(@post_image.id), class: "btn btn-info" %>
        <%= link_to "削除", post_image_path(@post_image.id), method: :delete, class: "btn btn-info" %>
      <% end %>
      <!--コメント表示-->
      <div class="comment">
        <% @post_image.comments.each do |comment| %>
          <%= attachment_image_tag comment.user, :profile_image, :fill, 100, 100, class: "rounded-circle" %>
          <%= comment.user.account_name %>
          <%= comment.comment %>
          <% if comment.user == current_user %>
            <%= link_to "削除", post_image_comment_path(comment.post_image, comment), method: :delete, class: "btn btn-info" %>
          <% end %>
        <% end %>
      </div>
      <div class="new-comment">
        <%= form_with(model: [@post_image, @comment], local: true) do |f| %>
          <%= f.text_area :comment, rows:'3', class: "form-control" %>
          <%= f.submit 'コメントを投稿する', class: "btn btn-info" %>
        <% end %>
      </div>
    </div>
  </div>
</div>